function SpamJugglerAPI(){this._arrQueryResult=this._queryAPIServer();}SpamJugglerAPI.prototype.getAPITitle=function(){return this._arrQueryResult['api_title'];};SpamJugglerAPI.prototype.getAPIVersion=function(){return this._arrQueryResult['api_version'];};SpamJugglerAPI.prototype.getError=function(){return this._arrQueryResult['result_message'];};SpamJugglerAPI.prototype.isError=function(){var intEL=this._arrQueryResult['result_message'].length;var bE=(intEL>0)?true:false;return bE;};SpamJugglerAPI.prototype.isOK=function(){var bE=(this.isError())?false:true;return bE;};SpamJugglerAPI.prototype.getSystemInfo=function(){return this._getQuerySection('system');};SpamJugglerAPI.prototype.getSiteInfo=function(){return this._getQuerySection('site');};SpamJugglerAPI.prototype.getStatistics=function(){return this._getQuerySection('mails');};SpamJugglerAPI.prototype.getQueryResults=function(){return this._getQuerySection('result');};SpamJugglerAPI.prototype.getUserData=function(){return this._getQuerySection('alias');};SpamJugglerAPI.prototype.loadAlias=function(strAliasName,strPassWord){this._arrQueryResult=this._queryAPIServer(0,strAliasName,strPassWord);return this.isOK();};SpamJugglerAPI.prototype.addAlias=function(strAliasName,strPassWord,strForwardAddress,intForwardCount,bNotify){this._arrQueryResult=this._queryAPIServer(1,strAliasName,strPassWord,strForwardAddress,intForwardCount,bNotify );return this.isOK();};SpamJugglerAPI.prototype.editAlias=function(strAliasName,strPassWord,strForwardAddress,intForwardCount,bNotify){this._arrQueryResult=this._queryAPIServer(2,strAliasName,strPassWord,strForwardAddress,intForwardCount,bNotify );return this.isOK();};SpamJugglerAPI.prototype.deleteAlias=function(strAliasName,strPassWord){this._arrQueryResult=this._queryAPIServer(3,strAliasName,strPassWord);return this.isOK();};SpamJugglerAPI.prototype._getQuerySection=function(strSectionID){var arrRV={};for(var strRK in this._arrQueryResult){if(strRK.substring(0,strSectionID.length+1)===strSectionID+'_'){arrRV[strRK.replace(strSectionID+'_','')]=this._arrQueryResult[strRK];}}return arrRV;};SpamJugglerAPI.prototype._queryAPIServer=function(intAction,strAliasName,strPassWord,strForwardAddress,intForwardCount,bNotify){arrDS={};arrDS['result_error']=-1;arrDS['result_message']='';arrDS['system_name']='';arrDS['system_version']='';arrDS['system_date']='';arrDS['system_timestamp']=-1;arrDS['system_maxmailsize']=-1;arrDS['system_maxaliaslifetime']=-1;arrDS['system_maxmailcountperuser']=-1;arrDS['system_defaultnotify']=true;arrDS['site_title']='';arrDS['site_link']='';arrDS['site_copyright']='';arrDS['api_title']='';arrDS['api_version']='';arrDS['api_date']='';arrDS['api_author']='';arrDS['api_website']='';arrDS['mails_received']=-1;arrDS['mails_forwarded']=-1;arrDS['mails_rejected']=-1;arrDS['mails_failed']=-1;arrDS['alias_name']='';arrDS['alias_password']='';arrDS['alias_forwardaddress']='';arrDS['alias_forwardcount']=-1;arrDS['alias_expires']='';arrDS['alias_expirestimestamp']=-1;arrDS['alias_notify']=true;arrDS['alias_mailcount']=-1;var objXHR=null;if(window.XMLHttpRequest){try{objXHR=new XMLHttpRequest();}catch(objE){objXHR=null;}}if(objXHR==null){try{objXHR=new ActiveXObject('Microsoft.XMLHTTP');}catch(objE){objXHR=null;}}if(objXHR==null){try{objXHR=new ActiveXObject('Msxml2.XMLHTTP');}catch(objE){objXHR=null;}}if(objXHR==null){try{objXHR=new ActiveXObject('Msxml2.XMLHTTP.6.0');}catch(objE){objXHR=null;}}if(objXHR==null){try{objXHR=new ActiveXObject('Msxml2.XMLHTTP.3.0');}catch(objE){objXHR=null;}}if(objXHR==null){arrDS['result_error']=1;arrDS['result_message']='Cannot create XMLHttpRequest object';return arrDS;}intAction=((intAction==null)||(typeof intAction!=='number'))?0:intAction;strAliasName=((strAliasName==null)||(typeof strAliasName!=='string'))?'':strAliasName;strPassWord=((strPassWord==null)||(typeof strPassWord!=='string'))?'':strPassWord;strForwardAddress=((strForwardAddress==null)||(typeof strForwardAddress!=='string'))?'':strForwardAddress;intForwardCount=((intForwardCount==null)||(typeof intForwardCount!=='number'))?1:intForwardCount;bNotify=((bNotify==null)||(typeof bNotify!=='boolean'))?true:bNotify;objXHR.open('GET','//hot.as/spam-juggler/'+'?camp_oc=a643c'+'&camp_ac='+intAction+'&camp_un='+strAliasName+'&camp_pw='+strPassWord+'&camp_fa='+strForwardAddress+'&camp_mc='+intForwardCount+'&camp_sn='+((bNotify)?'1':'0')+'&'+Math.floor((Math.random()* 8999)+1000)+'='+Math.random(),false);objXHR.send(null);if(objXHR.responseXML==null){arrDS['result_error']=1;arrDS['result_message']='Invalid XML response';return arrDS;}var arrRV={};var arrCG=new Array('system','site','statistics','result','userdata');for(var strCK in arrCG){var arrSX=objXHR.responseXML.getElementsByTagName(arrCG[strCK]);for(var strSK in arrSX){var objNodes=arrSX[strSK].childNodes;for(var objElement in objNodes){if(objNodes[objElement]){if(objNodes[objElement].nodeType===1){arrRV[arrCG[strCK]+'_'+objNodes[objElement].nodeName]=objNodes[objElement].textContent;}}}}}arrDS['result_error']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['result_errors']):arrDS['result_error'];arrDS['result_message']=(typeof arrRV['result_errors']==='string')?arrRV['result_messages']:arrDS['result_message'];arrDS['system_name']=(typeof arrRV['result_errors']==='string')?arrRV['system_systemname']:arrDS['system_name'];arrDS['system_version']=(typeof arrRV['result_errors']==='string')?arrRV['system_systemversion']:arrDS['system_version'];arrDS['system_date']=(typeof arrRV['result_errors']==='string')?arrRV['system_date']:arrDS['system_date'];arrDS['system_timestamp']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['system_timestamp']):arrDS['system_timestamp'];arrDS['system_maxmailsize']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['system_maxmailsize']):arrDS['system_maxmailsize'];arrDS['system_maxaliaslifetime']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['system_maxmailaliaslifetime'].replace(' days','').replace('+','')):arrDS['system_maxaliaslifetime'];arrDS['system_maxmailcountperuser']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['system_maxmailcountperuser']):arrDS['system_maxmailcountperuser'];arrDS['system_defaultnotify']=(arrRV['system_defaultnotify']=='1')?true:false;arrDS['site_title']=(typeof arrRV['result_errors']==='string')?arrRV['site_title']:arrDS['site_title'];arrDS['site_link']=(typeof arrRV['result_errors']==='string')?arrRV['site_link']:arrDS['site_link'];arrDS['site_copyright']=(typeof arrRV['result_errors']==='string')?arrRV['site_copyright']:arrDS['site_copyright'];arrDS['api_title']='Spam-Juggler JavaScript API';arrDS['api_version']='1.2.48';arrDS['api_date']='2015-04-27';arrDS['api_author']='CI:A-Certus In Audio';arrDS['api_website']='http://certus.in/';arrDS['mails_received']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['statistics_mailsreceived']):arrDS['mails_received'];arrDS['mails_forwarded']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['statistics_mailsforwarded']):arrDS['mails_forwarded'];arrDS['mails_rejected']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['statistics_mailsrejected']):arrDS['mails_rejected'];arrDS['mails_failed']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['statistics_mailsfailed']):arrDS['mails_failed'];arrDS['alias_name']=(typeof arrRV['result_errors']==='string')?arrRV['userdata_aliasusername']:arrDS['alias_name'];arrDS['alias_password']=(typeof arrRV['result_errors']==='string')?arrRV['userdata_aliasuserpassword']:arrDS['alias_password'];arrDS['alias_forwardaddress']=(typeof arrRV['result_errors']==='string')?arrRV['userdata_forwardemailaddress']:arrDS['alias_forwardaddress'];arrDS['alias_forwardcount']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['userdata_maxforwardmailcount']):arrDS['alias_forwardcount'];arrDS['alias_expires']=(typeof arrRV['result_errors']==='string')?arrRV['userdata_expires']:arrDS['alias_expires'];arrDS['alias_expirestimestamp']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['userdata_expirestimestamp']):arrDS['alias_expirestimestamp'];arrDS['alias_notify']=(arrRV['userdata_notify']=='1')?true:false;arrDS['alias_mailcount']=(typeof arrRV['result_errors']==='string')?parseInt(arrRV['userdata_count']):arrDS['alias_mailcount'];if((arrDS['system_timestamp']===-1)||(arrDS['mails_received']===-1)||(arrDS['result_error']===-1)){arrDS['result_error']=1;arrDS['result_message']='Invalid XML response';return arrDS;}return arrDS;};var SpamJuggler=new SpamJugglerAPI();
